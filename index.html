<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Daily Farcaster Quote</title>
  <meta name="description" content="Get inspired with a daily quote from crypto, tech, and philosophy.">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üí°</text></svg>">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #f8fafc;
      color: #0f172a;
      text-align: center;
      padding: 20px;
      margin: 0;
      line-height: 1.6;
    }
    .container {
      max-width: 500px;
      margin: 0 auto;
      background: white;
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }
    h1 {
      color: #0ea5e9;
      margin-bottom: 20px;
    }
    .quote {
      font-size: 18px;
      margin: 20px 0;
      font-style: italic;
      color: #1e293b;
    }
    .author {
      font-weight: 600;
      color: #0ea5e9;
      margin-top: 8px;
    }
    .info {
      margin: 20px 0;
      padding: 12px;
      background: #f1f5f9;
      border-radius: 10px;
      font-size: 14px;
    }
    .btn {
      background: #0ea5e9;
      color: white;
      border: none;
      padding: 12px 28px;
      font-size: 16px;
      font-weight: 600;
      border-radius: 12px;
      cursor: pointer;
      margin-top: 16px;
    }
    .btn:hover {
      background: #0284c7;
    }
    .loading {
      color: #64748b;
      font-style: normal;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>‚ú® Daily Farcaster Quote</h1>
    
    <!-- Area quote akan diisi via JS -->
    <div id="quote-area">
      <p class="loading">Loading your wisdom...</p>
    </div>

    <button id="new-quote" class="btn" disabled>üåÄ New Quote</button>
  </div>

  <!-- Farcaster MiniApp SDK (CDN) -->
  <script type="module">
    import { sdk } from 'https://esm.sh/@farcaster/miniapp-sdk@latest';

    // Daftar kutipan
    const quotes = [
      { text: "Don't trust, verify.", author: "Vitalik Buterin" },
      { text: "Code is law.", author: "Lawrence Lessig" },
      { text: "Freedom is the ability to speak your mind without fear.", author: "Edward Snowden" },
      { text: "The best way to predict the future is to invent it.", author: "Alan Kay" },
      { text: "Be fearful when others are greedy. Be greedy when others are fearful.", author: "Warren Buffett" },
      { text: "Not your keys, not your crypto.", author: "Anonymous" },
      { text: "Innovation distinguishes between a leader and a follower.", author: "Steve Jobs" },
      { text: "The Internet is becoming the town square for the global village of tomorrow.", author: "Bill Gates" },
      { text: "Privacy is not an option, and it shouldn't be the price we accept for just getting on the Internet.", author: "Gary Kovacs" },
      { text: "Farcaster is the decentralized social layer we've been waiting for.", author: "DWR" }
    ];

    // Ambil kutipan acak
    function getRandomQuote() {
      return quotes[Math.floor(Math.random() * quotes.length)];
    }

    // Tampilkan kutipan
    function displayQuote() {
      const quote = getRandomQuote();
      const area = document.getElementById('quote-area');
      area.innerHTML = `
        <div class="quote">‚Äú${quote.text}‚Äù</div>
        <div class="author">‚Äî ${quote.author}</div>
        <div class="info">
          <p><strong>FID:</strong> <span id="fid">‚Äì</span></p>
          <p><strong>Wallet:</strong> <span id="wallet">‚Äì</span></p>
        </div>
      `;
    }

    // Aktifkan tombol & ambil data user
    async function initApp() {
      try {
        // Ambil data user dari SDK (aman & terverifikasi)
        const user = await sdk.user.get();
        
        document.getElementById('fid').textContent = user.fid || '‚Äì';
        document.getElementById('wallet').textContent = user.addresses?.[0] || '‚Äì';
        
      } catch (e) {
        console.warn("User data not available:", e);
      }

      displayQuote();
      document.getElementById('new-quote').disabled = false;
    }

    // Event listener tombol
    document.getElementById('new-quote').addEventListener('click', () => {
      displayQuote();
    });

    // Sembunyikan splash screen & tampilkan app
    window.addEventListener('load', async () => {
      await initApp();
      
      // ‚úÖ Wajib: beri tahu Farcaster bahwa app siap
      await sdk.actions.ready();
    });
  </script>
</body>
</html>
